#:import utils kivy.utils
#:import WipeTransition kivy.uix.screenmanager.WipeTransition

<RoundedButton@Button>:
    background_color: 0, 0, 0, 0
    background_normal: ''

    canvas.before:
        Color:
            rgba: (0.2, 0.2, 0.2, 1) if self.state == 'down' else (0.3, 0.3, 0.3, 1)
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [15]

<NavigationManager>:

    canvas.before:
        Color:
            rgba: 0.1, 0.1, 0.1, 1  # Dark gray background
        Rectangle:
            pos: self.pos
            size: self.size
    
    ScreenManager:
        size: root.width, root.height 
        id: current_screen
        #transition: WipeTransition(duration=0.25)
        
        Screen:
            name: "Till"
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1  # Dark gray background
                Rectangle:
                    pos: self.pos
                    size: self.size    
            FloatLayout:
                Label:
                    id: location_label
                    text: "Location: _blank (0.00, 0.00)"
                    font_size: '28sp'
                    pos_hint: {"top": 0.8, "center_x": 0.5}
                    color: 0, 0, 0, 1
                    size_hint: (0.5, 0.1)

                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1  # Dark gray background
                        Rectangle:
                            pos: self.pos
                            size: self.size  
                BoxLayout:
                    spacing: 5
                    padding: 10
                    orientation: 'horizontal'  

                    pos_hint: {"top": 0.68, "center_x": 0.5}
                    color: 0, 0, 0, 1
                    size_hint: (0.8, 0.35)

                    canvas.before:
                        Color:
                            rgba: 0.3, 0.3, 0.3, 1  # Dark gray background
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size 
                            radius: [5]
                    Label:
                        id: fajr_label
                        text: "Fajr: --:-- "
                        color: 0, 0, 0, 1
                        canvas.before:
                            Color:
                                rgba: 1, 1, 1, 0.9  # Dark gray background
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size 
                                radius: [5]
                    Label:
                        id: dhuhr_label
                        text: "Duhur: --:-- "
                        color: 0, 0, 0, 1
                        canvas.before:
                            Color:
                                rgba: 1, 1, 1, 0.9  # Dark gray background
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size 
                                radius: [5]
                    Label:
                        id: asr_label
                        text: "Asr: --:-- "
                        color: 0, 0, 0, 1
                        canvas.before:
                            Color:
                                rgba: 1, 1, 1, 0.9  # Dark gray background
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size 
                                radius: [5]
                    Label:
                        id: maghrib_label
                        text: "Magrib: --:-- "
                        color: 0, 0, 0, 1
                        canvas.before:
                            Color:
                                rgba: 1, 1, 1, 0.9  # Dark gray background
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size 
                                radius: [5] 
                    Label:
                        id: isha_label
                        text: "Isha: --:-- "
                        color: 0, 0, 0, 1
                        canvas.before:
                            Color:
                                rgba: 1, 1, 1, 0.9  # Dark gray background
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size 
                                radius: [5]                               
                Label:
                    id: time_remaining_label
                    text: "Time remaining:"
                    font_size: '28sp'
                    pos_hint: {"top": 0.3125, "center_x": 0.5}
                    color: 0, 0, 0, 1
                    size_hint: (0.5, 0.1)

                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1  # Dark gray backgraound
                        Rectangle:
                            pos: self.pos
                            size: self.size  
                RoundedButton:
                    id: mute_button
                    size_hint: (0.3, 0.1)
                    pos_hint: {"center_x": 0.5, "y": 0.125}
                    text: 'Mute Adhan'
                    on_press: root.mute_adhan()
                    
        Screen:
            name: "Alarms"
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1  # Dark gray background
                Rectangle:
                    pos: self.pos
                    size: self.size    

            FloatLayout:
                size_hint: (None, None)
                size: root.width, root.height 
                pos_hint: {"center_x": 0.5, "center_y": 0.5}
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1  # Dark gray background
                    Rectangle:
                        pos: self.pos
                        size: self.size    
                Label:
                    text: "Alarms"
                    pos_hint: {"top": 0.9, "center_x": 0.3}
                    font_size: '32sp'
                    size_hint: (0.5, 0.1)
                    color: 0, 0, 0, 1

                    halign: 'left'
                    valign: 'middle'
                    text_size: self.size

                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1  # Dark gray background
                        Rectangle:
                            pos: self.pos
                            size: self.size   
            
        Screen:
            name: "Qibla"
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1  # Dark gray background
                Rectangle:
                    pos: self.pos
                    size: self.size    
            FloatLayout:
                size_hint: (None, None)
                size: root.width, root.height 
                pos_hint: {"center_x": 0.5, "center_y": 0.5}
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1  # Dark gray background
                    Rectangle:
                        pos: self.pos
                        size: self.size    
                Label:
                    text: "Qibla Direction"
                    pos_hint: {"top": 0.9, "center_x": 0.3}
                    font_size: '32sp'
                    size_hint: (0.5, 0.1)
                    color: 0, 0, 0, 1

                    halign: 'left'
                    valign: 'middle'
                    text_size: self.size

                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1  # Dark gray background
                        Rectangle:
                            pos: self.pos
                            size: self.size   
                Label:
                    text: "Yet to come..."
                    size_hint: (1, 1)
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    font_size: '24sp'
                    color: 0, 0, 0, 1
        Screen:
            name: "Settings"
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1  # Dark gray background
                Rectangle:
                    pos: self.pos
                    size: self.size    

            FloatLayout:
                size_hint: (None, None)
                size: root.width, root.height 
                pos_hint: {"center_x": 0.5, "center_y": 0.5}
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1  # Dark gray background
                    Rectangle:
                        pos: self.pos
                        size: self.size    
                Label:
                    text: "Settings"
                    pos_hint: {"top": 0.9, "center_x": 0.3}
                    font_size: '32sp'
                    size_hint: (0.5, 0.1)
                    color: 0, 0, 0, 1

                    halign: 'left'
                    valign: 'middle'
                    text_size: self.size

                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1  # Dark gray background
                        Rectangle:
                            pos: self.pos
                            size: self.size   
                Label:
                    text: "Yet to come..."
                    size_hint: (1, 1)
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    font_size: '24sp'
                    color: 0, 0, 0, 1

    BoxLayout:
        size_hint: (0.5, 0.1)            # 50% of screen width, 10% height
        pos_hint: {"center_x": 0.5, "y": 0.0125}  # centered horizontally
        spacing: 5
        padding: 10

        canvas.before:
            Color:
                rgba: 0.2, 0.2, 0.2, 1  # Dark gray background
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [10]

        RoundedButton:
            text: 'Till'
            on_press: root.screen_switcher("Till", self)
        RoundedButton:
            text: 'Qibla'
            on_press: root.screen_switcher("Qibla", self)

        RoundedButton:
            text: 'Settings'
            on_press: root.screen_switcher("Settings", self)

            
            

